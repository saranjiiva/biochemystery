<!DOCTYPE html>
<html>
<head>
<title>OT Anatomy Game</title>

<style>
body {
  text-align: center;
  background: #e6e6e6;
  font-family: Arial;
}
canvas {
  border: 3px solid black;
  background: #ddd;
}
</style>
</head>

<body>

<h1>OT Anatomy Game</h1>
<h3>Click the correct organ</h3>
<h2 id="question"></h2>
<h2 id="score">Score: 0</h2>

<canvas id="game" width="900" height="600"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let score = 0;

const organs = {
  Liver: {
    color: "#8b3e2f",
    shape: function(){
      ctx.beginPath();
      ctx.moveTo(260,220);
      ctx.bezierCurveTo(300,180, 460,180, 520,230);
      ctx.bezierCurveTo(560,260, 520,300, 430,310);
      ctx.bezierCurveTo(350,320, 260,300, 240,260);
      ctx.closePath();
    }
  },

  Stomach: {
    color: "#cc4444",
    shape: function(){
      ctx.beginPath();
      ctx.moveTo(400,260);
      ctx.bezierCurveTo(460,250, 520,280, 500,350);
      ctx.bezierCurveTo(480,400, 380,380, 360,320);
      ctx.bezierCurveTo(350,290, 370,270, 400,260);
      ctx.closePath();
    }
  },

  Spleen: {
    color: "#f4d35e",
    shape: function(){
      ctx.beginPath();
      ctx.moveTo(540,260);
      ctx.bezierCurveTo(580,250, 610,280, 600,320);
      ctx.bezierCurveTo(580,360, 530,340, 520,300);
      ctx.closePath();
    }
  },

  Intestine: {
    color: "#eee",
    shape: function(){
      ctx.beginPath();
      ctx.moveTo(320,380);
      ctx.bezierCurveTo(500,380, 580,420, 500,460);
      ctx.bezierCurveTo(350,500, 300,440, 320,380);
      ctx.closePath();
    }
  }
};

let organList = Object.keys(organs);
let current = randomOrgan();

document.getElementById("question").innerText = "Find the: " + current;

function randomOrgan(){
  return organList[Math.floor(Math.random()*organList.length)];
}

function draw(){
  ctx.clearRect(0,0,900,600);

  // Abdomen cavity
  ctx.fillStyle="#f5a3b8";
  ctx.beginPath();
  ctx.ellipse(450,350,260,220,0,0,Math.PI*2);
  ctx.fill();

  // Draw organs
  for(let o in organs){
    ctx.fillStyle = organs[o].color;
    organs[o].shape();
    ctx.fill();
  }
}

canvas.addEventListener("click", function(e){
  let rect = canvas.getBoundingClientRect();
  let x = e.clientX - rect.left;
  let y = e.clientY - rect.top;

  for(let o in organs){
    let p = organs[o];
    if(x>p.x && x<p.x+p.w && y>p.y && y<p.y+p.h){
      if(o==current){
        score++;
        alert("Correct!");
      } else {
        alert("Wrong! That is " + o);
      }

      current = randomOrgan();
      document.getElementById("question").innerText = "Find the: " + current;
      document.getElementById("score").innerText = "Score: " + score;
      draw();
    }
  }
});

draw();
</script>

</body>
</html>
